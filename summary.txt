메인 메뉴 구현 및 디버깅 요약

1. 최종 목표
- `GameState`를 도입하여 '메인 메뉴'와 '인게임' 상태를 분리.
- 메인 메뉴 상태에서는 전체 화면 텍스처를 표시.
- 'Enter' 키를 누르면 인게임 상태로 전환.

2. 발생했던 문제
초기 접근법으로 기존 3D 씬의 복잡한 렌더링 파이프라인(루트 시그니처, 셰이더 등)을 2D UI 렌더링에 재사용하려 했으나, 다음과 같은 문제들이 지속적으로 발생:
1.  메인 메뉴 화면에 텍스처가 그려지지 않음 (빈 화면).
2.  프로그램 종료 시 `CScene::ReleaseObjects` 내부에서 액세스 위반으로 충돌 발생.

3. 근본 원인 및 해결 과정

3.1. UI 렌더링 파이프라인 완전 분리
- 원인: 3D 씬의 복잡한 상태(루트 시그니처, PSO)와 2D UI 렌더링의 단순한 상태가 서로 충돌.
- 해결:
    - UI 렌더링만을 위한 `CUIShader` 클래스 및 `UIShader.h/cpp` 파일 생성.
    - `Shaders.hlsl`에 UI 전용 버텍스 셰이더(`VS_UI`)와 픽셀 셰이더(`PS_UI`) 추가.
    - 핵심: `CUIShader`가 자신만의 **단순화된 루트 시그니처**를 직접 생성하고 소유하도록 설계. 이 루트 시그니처는 오직 UI 텍스처 하나만을 파라미터로 받음.
    - `CScene::Render` 함수를 `GameState`에 따라 분기하여, `MainMenu`일 때는 `CUIShader`의 루트 시그니처를, `InGame`일 때는 3D 씬의 루트 시그니처를 설정하도록 파이프라인을 완벽히 분리.

3.2. 종료 시 충돌 문제 해결
- 원인: `CShader` 클래스의 참조 횟수(`m_nReferences`)가 생성자에서 `0`으로 초기화됨. 이로 인해 `CScene`과 `CMaterial`에서 이중으로 `Release()`가 호출되면서 셰이더 객체가 조기에 소멸되고, `CScene::ReleaseObjects`에서 댕글링 포인터에 접근하여 충돌 발생.
- 해결: `CScene::BuildObjects`에서 `CUIShader`와 `CObjectsShader` 객체를 `new`로 생성한 직후, `AddRef()`를 수동으로 호출. 이를 통해 `CScene`이 셰이더의 소유권을 명시적으로 획득하도록 하여 조기 소멸 문제를 해결.

3.3. 화면이 그려지지 않는 문제 해결
- 1차 원인: `MainMenu` 상태의 렌더링 경로에서 **뷰포트(Viewport) 및 씨저렉트(Scissor Rectangle) 설정**이 누락됨. 이로 인해 GPU가 어디에 그려야 할지 몰라 모든 렌더링 명령을 무시.
- 1차 해결: `CGameFramework::GetCamera()` 함수를 추가하고, `CScene::Render`의 `MainMenu` 분기 시작점에서 이 카메라를 이용해 `SetViewportsAndScissorRects()`를 호출하도록 수정.

- 2차 원인: (뷰포트 설정 후에도 화면이 나오지 않아 추가 디버깅) `CUIShader`의 루트 시그니처에 정의된 파라미터 중, 실제 셰이더에서는 사용되지 않지만 C++ 코드에서 값을 설정해주지 않은 파라미터가 존재. 이로 인해 GPU 드라이버가 렌더링 명령을 유효하지 않다고 판단하고 무시.
- 2차 해결: `CUIShader`의 루트 시그니처를 더욱 단순화하여, 실제 사용하는 **텍스처 디스크립터 테이블 파라미터 하나만** 남도록 수정. `CScene`에서도 해당 파라미터 인덱스(`0`)에 텍스처를 바인딩하도록 수정하여 문제를 최종 해결.

4. 최종 상태
- `GameState`에 따라 메인 메뉴와 인게임이 정상적으로 분리되어 렌더링됨.
- 모든 충돌 및 렌더링 아티팩트가 해결됨.

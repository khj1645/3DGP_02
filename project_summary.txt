# 프로젝트 기능 구현 요약

## 1. 1인칭 카메라 및 플레이어

플레이어와 독립적으로 움직이는 1인칭 시점 카메라를 구현했습니다. 카메라의 시점 변환(View Transform)과 투영 변환(Projection Transform)은 셰이더에 상수 버퍼(Constant Buffer)로 전달되어 3D 월드를 1인칭 시점으로 렌더링합니다. 플레이어의 이동 및 회전 입력은 카메라의 방향 벡터(Look, Up, Right)를 기준으로 월드 공간에서의 움직임으로 변환되어 적용됩니다. (참고: 플레이어 모델 자체가 카메라에 가까워질 때 투명해지는 '블렌딩'은 아직 구현되지 않았습니다.)

## 2. 총알 발사 및 충돌 처리

### 총알 생성 및 관리
- `CScene` 클래스에 총알의 생성, 애니메이션, 렌더링, 소멸을 관리하는 로직을 통합했습니다.
- `SpawnBullet` 함수: 플레이어의 현재 위치와 바라보는 방향을 기준으로 `CBullet` 객체를 생성합니다. 각 총알 객체는 독립적인 위치, 방향, 속도, 그리고 수명(LifeTime) 값을 가집니다.
- `AnimateBullets` 함수: 매 프레임 호출되며, 모든 활성 총알의 위치를 `방향 * 속도 * 경과시간` 공식에 따라 업데이트합니다. 동시에 수명을 감소시키고, 수명이 0 이하가 되면 리스트에서 제거하여 소멸시킵니다.

### 충돌 처리
- `CheckBulletCollisions` 함수를 통해 총알과 적 사이의 충돌을 검사합니다.
- 로직: 모든 활성 총알과 `CObjectsShader`에 의해 관리되는 모든 적 객체를 이중으로 순회합니다.
- 판정: 각 총알과 적의 경계 상자(Axis-Aligned Bounding Box, AABB)가 서로 교차하는지 `Intersects()` 함수로 검사합니다.
- 결과: 충돌이 감지되면, 해당 적 객체의 `m_bRender` 플래그를 `false`로 설정하여 화면에 보이지 않게 처리합니다. 동시에 충돌한 총알의 수명을 즉시 0으로 만들어 다음 프레임에서 제거되도록 합니다.

## 3. 적 카운터 숫자 UI

### 핵심 아이디어
- 기존의 UI 렌더링 시스템(`CUIShader`, `CUIRectMesh`)을 재사용하되, 0~9 숫자가 그려진 텍스처 아틀라스(`num.dds`)의 특정 부분만 동적으로 잘라내어 화면에 숫자를 표시합니다.

### 주요 구현 단계
1.  **`CUIRectMesh` 기능 확장**:
    -   UI 사각 메쉬의 UV 좌표를 런타임에 변경할 수 있는 `SetUVRect(u0, v0, u1, v1)` 함수를 추가했습니다.
    -   이를 위해 해당 메쉬의 정점 버퍼(UV 좌표용)가 CPU에 의해 직접 수정될 수 있도록, 리소스 힙 타입을 `D3D12_HEAP_TYPE_DEFAULT`에서 `D3D12_HEAP_TYPE_UPLOAD`로 변경했습니다.

2.  **UI 객체 생성 및 관리**:
    -   `CScene` 클래스에 숫자 텍스처(`m_pNumberTexture`), 숫자용 재질(`m_pNumberMaterial`), 그리고 각 자릿수를 표시할 게임 오브젝트 배열(`m_pEnemyCountDigits[3]`)을 멤버 변수로 추가했습니다.
    -   `BuildObjects` 함수에서 이 객체들을 생성합니다. 3개의 숫자 게임 오브젝트는 모두 동일한 텍스처와 재질을 공유하여 효율성을 높였습니다.

3.  **UI 업데이트 로직**:
    -   `GetRemainingEnemyCount()`: `CObjectsShader`가 관리하는 적들 중 `m_bRender` 플래그가 `true`인 객체의 수를 세어 반환합니다.
    -   `UpdateEnemyCountUI()`: 위 함수로 얻은 적의 수를 100, 10, 1의 자리로 분해합니다.
    -   `SetDigitUV()`: 각 자릿수(0~9)에 해당하는 텍스처 아틀라스 내의 정확한 UV 좌표(u0, v0, u1, v1)를 계산하고, `SetUVRect` 함수를 호출하여 해당 숫자 UI 메쉬의 UV를 갱신합니다.

4.  **UI 렌더링 (직접 그리기 방식)**:
    -   `CScene::Render` 함수의 인게임 렌더링 로직 마지막에 숫자 UI를 그립니다.
    -   **루트 시그니처 충돌 방지**: 3D 객체 렌더링에 사용되는 복잡한 `CGameObject::Render` 경로를 타지 않고, UI 렌더링을 위한 최소한의 과정을 직접 수행합니다.
    -   **렌더링 순서**:
        1.  UI 렌더링을 위해 `CUIShader`의 루트 시그니처와 파이프라인 상태(PSO)를 명시적으로 설정합니다.
        2.  숫자 텍스처의 SRV(Shader Resource View) 디스크립터 테이블을 UI 루트 시그니처의 0번 파라미터에 직접 바인딩합니다.
        3.  `m_pEnemyCountDigits` 배열을 순회하며, 각 게임 오브젝트에서 메쉬(`CMesh`)만 가져와 `pMesh->Render()`를 호출합니다.
